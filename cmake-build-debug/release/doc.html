<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COPL è¯­è¨€æ–‡æ¡£</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background-color: #f8fafc;
            padding: 0 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            background-color: white;
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px -10px rgba(0,20,30,0.2);
            overflow: hidden;
            padding: 2rem 2.5rem;
        }

        h1, h2, h3 {
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-top: 2em;
            margin-bottom: 0.75em;
            color: #0f2b3d;
        }

        h1 {
            font-size: 2.8rem;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 0.4rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }

        h2 {
            font-size: 2rem;
            border-bottom: 1px solid #d0e0f0;
            padding-bottom: 0.3rem;
        }

        h3 {
            font-size: 1.4rem;
        }

        p, li, .note {
            margin-bottom: 1rem;
            color: #1e3a5f;
        }

        a {
            color: #2563eb;
            text-decoration: none;
            font-weight: 500;
        }

        a:hover {
            text-decoration: underline;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        th {
            background-color: #3b82f6;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1rem;
            text-align: left;
        }

        td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:nth-child(even) {
            background-color: #f8fafc;
        }

        code, pre {
            font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'Courier New', monospace;
            font-size: 0.9em;
            background-color: #ecf5ff;
            border-radius: 0.5rem;
        }

        :not(pre) > code {
            background-color: #ecf5ff;
            padding: 0.2rem 0.5rem;
            color: #0b4f8c;
            white-space: nowrap;
            border: 1px solid #bdd3f0;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.2rem 1.5rem;
            border-radius: 1rem;
            overflow-x: auto;
            box-shadow: inset 0 0 0 1px #334155, 0 8px 16px rgba(0,0,0,0.2);
            margin: 1.5rem 0;
            line-height: 1.4;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
            border: none;
            white-space: pre;
        }

        .toc {
            background: #f1f6fe;
            padding: 1.8rem 2rem;
            border-radius: 1.5rem;
            margin: 2rem 0 2.5rem 0;
            border: 1px solid #cbd5e1;
        }

        .toc h2 {
            margin-top: 0;
            border-bottom: 2px solid #2563eb;
            padding-bottom: 0.4rem;
            margin-bottom: 1.2rem;
        }

        .toc ul {
            columns: 2 250px;
            column-gap: 2.5rem;
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            margin-bottom: 0.5rem;
            break-inside: avoid;
        }

        .toc a {
            display: block;
            padding: 0.3rem 0.8rem;
            background: white;
            border-radius: 2rem;
            border: 1px solid #bac8dc;
            transition: all 0.2s;
            color: #1e3a5f;
        }

        .toc a:hover {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
            text-decoration: none;
        }

        hr {
            border: none;
            border-top: 2px dashed #cbd5e1;
            margin: 2.5rem 0;
        }

        .badge {
            display: inline-block;
            background: #3b82f6;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.2rem 0.7rem;
            border-radius: 2rem;
            margin-left: 0.6rem;
            vertical-align: middle;
            letter-spacing: 0.3px;
        }

        footer {
            margin-top: 3rem;
            padding-top: 1.5rem;
            text-align: center;
            color: #6b7a8f;
            border-top: 1px solid #d6e3f5;
        }

        .example-title {
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.3rem;
            color: #0f2b3d;
        }

        @media (max-width: 700px) {
            .container {
                padding: 1.2rem;
                border-radius: 1rem;
            }
            h1 {
                font-size: 2.2rem;
            }
            .toc ul {
                columns: 1;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>ğŸ“˜ COPL è¯­è¨€æ–‡æ¡£</h1>
    <p><strong>ç‰ˆæœ¬ 0.1</strong> Â· é™æ€ç±»å‹ Â· ç¼–è¯‘è‡³å­—èŠ‚ç  Â· å†…ç½®è™šæ‹Ÿæœº</p>
    <p>COPL æ˜¯ä¸€ç§ç°ä»£ç³»ç»Ÿçº§è¯­è¨€ï¼Œæ”¯æŒé¢å‘å¯¹è±¡ã€æ³›å‹æ•°ç»„ã€lambdaè¡¨è¾¾å¼å’Œæ¨¡å—åŒ–ç¼–ç¨‹ã€‚å…¶ç¼–è¯‘å™¨å°†æºä»£ç ç¼–è¯‘ä¸ºå¹³å°æ— å…³çš„å­—èŠ‚ç ï¼Œç”±é«˜æ•ˆè™šæ‹Ÿæœºæ‰§è¡Œã€‚</p>

    <div class="toc">
        <h2>ğŸ“‘ ç›®å½•</h2>
        <ul>
            <li><a href="#quickstart">ğŸš€ å¿«é€Ÿå¼€å§‹</a></li>
            <li><a href="#syntax">ğŸ“– åŸºæœ¬è¯­æ³•</a>
                <ul style="columns:1; margin-top:0.3rem; list-style:circle; padding-left:1.5rem;">
                    <li><a href="#comments">æ³¨é‡Š</a></li>
                    <li><a href="#types">æ•°æ®ç±»å‹</a></li>
                    <li><a href="#variables">å˜é‡å®šä¹‰</a></li>
                    <li><a href="#operators">è¿ç®—ç¬¦</a></li>
                    <li><a href="#control">æ§åˆ¶æµ</a></li>
                    <li><a href="#functions">å‡½æ•°</a></li>
                    <li><a href="#class">ç±»ä¸å¯¹è±¡</a></li>
                    <li><a href="#array">æ•°ç»„</a></li>
                    <li><a href="#lambda">Lambdaè¡¨è¾¾å¼</a></li>
                    <li><a href="#module">æ¨¡å—å¯¼å…¥</a></li>
                </ul>
            </li>
            <li><a href="#buildrun">âš™ï¸ ç¼–è¯‘ä¸è¿è¡Œ</a></li>
            <li><a href="#examples">ğŸ“‹ ç¤ºä¾‹ä»£ç </a></li>
            <li><a href="#builtins">ğŸ”§ å†…ç½®å‡½æ•°</a></li>
        </ul>
    </div>

    <h2 id="quickstart">ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
    <ol>
        <li>ä¸‹è½½æºç å¹¶ç¼–è¯‘ç”Ÿæˆå‘½ä»¤è¡Œå·¥å…· <code>copl</code>ï¼ˆéœ€C++17æ”¯æŒï¼‰ã€‚</li>
        <li>ç¼–è¯‘æºä»£ç ï¼š<code>copl -c source.copl</code> ç”Ÿæˆ <code>.copl</code> å­—èŠ‚ç æ–‡ä»¶ã€‚</li>
        <li>è¿è¡Œå­—èŠ‚ç ï¼š<code>copl -r output.copl</code></li>
        <li>åç¼–è¯‘æŸ¥çœ‹å­—èŠ‚ç ï¼š<code>copl -d output.copl</code></li>
    </ol>

    <hr>

    <h2 id="syntax">ğŸ“– åŸºæœ¬è¯­æ³•</h2>

    <h3 id="comments">æ³¨é‡Š</h3>
    <p>ä½¿ç”¨ <code>#</code> è¿›è¡Œå•è¡Œæ³¨é‡Šï¼Œç›´åˆ°è¡Œæœ«ã€‚</p>
    <pre><code># è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š
let x: int = 10;  # è¡Œæœ«æ³¨é‡Š</code></pre>

    <h3 id="types">æ•°æ®ç±»å‹</h3>
    <table>
        <thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead>
        <tbody>
            <tr><td><code>int</code></td><td>32ä½æœ‰ç¬¦å·æ•´æ•°</td><td><code>42</code>, <code>-5</code></td></tr>
            <tr><td><code>float</code></td><td>åŒç²¾åº¦æµ®ç‚¹æ•°</td><td><code>3.14</code>, <code>-0.5</code></td></tr>
            <tr><td><code>string</code></td><td>å­—ç¬¦ä¸²ï¼ˆæ”¯æŒè½¬ä¹‰ï¼‰</td><td><code>"hello\nworld"</code></td></tr>
            <tr><td><code>bool</code></td><td>å¸ƒå°”å€¼</td><td><code>true</code>, <code>false</code></td></tr>
            <tr><td><code>[T]</code></td><td>å…ƒç´ ç±»å‹ä¸º T çš„æ•°ç»„</td><td><code>[int]</code>, <code>[string]</code></td></tr>
            <tr><td>ç±»å</td><td>è‡ªå®šä¹‰ç±»ç±»å‹</td><td><code>Person</code></td></tr>
            <tr><td><code>lambda</code></td><td>å‡½æ•°ç±»å‹ï¼ˆè§Lambdaï¼‰</td><td><code>lambda -> int</code></td></tr>
            <tr><td><code>null</code></td><td>ç©ºå€¼</td><td><code>null</code></td></tr>
        </tbody>
    </table>

    <h3 id="variables">å˜é‡å®šä¹‰</h3>
    <p>ä½¿ç”¨ <code>let</code> å®šä¹‰å˜é‡ï¼Œå¿…é¡»æŒ‡å®šç±»å‹ï¼Œå¯åˆå§‹åŒ–ã€‚</p>
    <pre><code>let age: int = 18;
let name: string;
name = "COPL";
let flag: bool = true;
let arr: [int] = [1, 2, 3];</code></pre>

    <h3 id="operators">è¿ç®—ç¬¦</h3>

    <h4>ç®—æœ¯è¿ç®—ç¬¦</h4>
    <p><code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>%</code> <code>**</code>ï¼ˆä¹˜æ–¹ï¼‰</p>

    <h4>è‡ªå¢/è‡ªå‡</h4>
    <p><code>++</code> <code>--</code>ï¼ˆå‰ç¼€æˆ–åç¼€ï¼‰</p>

    <h4>ä½è¿ç®—ç¬¦</h4>
    <p><code>&</code> <code>|</code> <code>~</code> <code>&lt;&lt;</code> <code>&gt;&gt;</code></p>

    <h4>æ¯”è¾ƒè¿ç®—ç¬¦</h4>
    <p><code>==</code> <code>!=</code> <code>&lt;</code> <code>&lt;=</code> <code>&gt;</code> <code>&gt;=</code></p>

    <h4>é€»è¾‘è¿ç®—ç¬¦</h4>
    <p><code>&amp;&amp;</code> <code>||</code> <code>!</code></p>

    <h4>èµ‹å€¼ä¸å¤åˆèµ‹å€¼</h4>
    <p><code>=</code> <code>+=</code> <code>-=</code> <code>*=</code> <code>/=</code> <code>%=</code> <code>&lt;&lt;=</code> <code>&gt;&gt;=</code> <code>|=</code> <code>&amp;=</code></p>

    <h4>æˆå‘˜è®¿é—®</h4>
    <p><code>.</code> è®¿é—®å¯¹è±¡æˆå‘˜</p>

    <h4>ä¸‹æ ‡è®¿é—®</h4>
    <p><code>[]</code> è®¿é—®æ•°ç»„å…ƒç´ </p>

    <h4>ç®­å¤´</h4>
    <p><code>-&gt;</code> ç”¨äºlambdaç±»å‹å£°æ˜</p>

    <h3 id="control">æ§åˆ¶æµ</h3>

    <h4>if-else</h4>
    <pre><code>if (condition) {
    # è¯­å¥
} else {
    # å¯é€‰
}</code></pre>

    <h4>while</h4>
    <pre><code>while (condition) {
    # å¾ªç¯ä½“
}</code></pre>

    <h4>for</h4>
    <pre><code>for (let i: int = 0; i < 10; ++i) {
    # å¾ªç¯ä½“
}</code></pre>
    <p><code>init</code> å¿…é¡»æ˜¯å˜é‡å®šä¹‰ï¼Œ<code>condition</code> ä¸ºå¸ƒå°”è¡¨è¾¾å¼ï¼Œ<code>change</code> å¯ä»¥æ˜¯ä»»æ„è¡¨è¾¾å¼ï¼ˆé€šå¸¸ä¸ºè‡ªå¢/è‡ªå‡ï¼‰ã€‚</p>

    <h4>switch</h4>
    <pre><code>switch (value) {
    case expr1: { ... }
    case expr2: { ... }
    default: { ... }
}</code></pre>
    <p>æ¯ä¸ª <code>case</code> åéœ€è·Ÿ <code>:</code> å’Œä»£ç å—ã€‚<code>default</code> å¯çœç•¥ã€‚</p>

    <h4>break / continue</h4>
    <p>ç”¨äºå¾ªç¯æˆ– <code>switch</code> ä¸­ã€‚</p>

    <h4>return</h4>
    <pre><code>return;           # æ— è¿”å›å€¼ï¼ˆvoidï¼‰
return expr;      # è¿”å›è¡¨è¾¾å¼å€¼</code></pre>

    <h3 id="functions">å‡½æ•°</h3>
    <p>å‡½æ•°ä½¿ç”¨ <code>def</code> å®šä¹‰ï¼Œå‚æ•°ä¸ºå˜é‡å®šä¹‰å½¢å¼ã€‚å‡½æ•°ä½“å¿…é¡»ç”¨èŠ±æ‹¬å·åŒ…å›´ã€‚è‹¥æ²¡æœ‰ <code>return</code>ï¼Œåˆ™è¿”å› <code>null</code>ã€‚</p>
    <pre><code>def add(a: int, b: int) {
    return a + b;
}</code></pre>

    <h3 id="class">ç±»ä¸å¯¹è±¡</h3>
    <p>ç±»å®šä¹‰ä½¿ç”¨ <code>class</code>ï¼Œå†…éƒ¨å¯åŒ…å«å˜é‡ï¼ˆå­—æ®µï¼‰å’Œæ–¹æ³•ï¼Œæ”¯æŒè®¿é—®æ§åˆ¶ <code>public</code> / <code>private</code>ï¼ˆé»˜è®¤ <code>private</code>ï¼‰ã€‚</p>
    <pre><code>class Person {
    public let name: string;
    private let age: int;

    public def constructor(name: string, age: int) {
        this.name = name;
        this.age = age;
    }

    public def greet() {
        println("Hello, I'm " + this.name);
    }
}</code></pre>
    <p><strong>æ³¨æ„</strong>ï¼šæ„é€ æ–¹æ³•å¿…é¡»å‘½åä¸º <code>constructor</code>ï¼Œä¸”é»˜è®¤è‡ªåŠ¨ä¸º <code>public</code>ã€‚</p>

    <h4>å¯¹è±¡åˆ›å»º</h4>
    <p>ä½¿ç”¨ <code>new</code> å…³é”®å­—ï¼Œè‹¥éœ€è°ƒç”¨æ„é€ æ–¹æ³•åˆ™åŠ æ‹¬å·ä¼ å‚ã€‚</p>
    <pre><code>let p: Person = new Person("Alice", 25);
p.greet();</code></pre>

    <h3 id="array">æ•°ç»„</h3>
    <p>æ•°ç»„ç±»å‹è¡¨ç¤ºä¸º <code>[T]</code>ï¼Œä¾‹å¦‚ <code>[int]</code>ã€‚æ•°ç»„å­—é¢é‡ç”¨æ–¹æ‹¬å·æ‹¬èµ·ï¼Œé€—å·åˆ†éš”ã€‚</p>
    <pre><code>let arr: [int] = [1, 2, 3, 4];
let first: int = arr[0];
arr[1] = 10;</code></pre>

    <h3 id="lambda">Lambdaè¡¨è¾¾å¼</h3>
    <p>Lambda ä½¿ç”¨ <code>$</code> å¼€å¤´ï¼Œåè·Ÿå‚æ•°åˆ—è¡¨ã€è¿”å›ç±»å‹ï¼ˆç”¨ <code>-&gt;</code> æŒ‡æ˜ï¼‰å’Œå‡½æ•°ä½“ã€‚å…¶ç±»å‹ä¸º <code>lambda -&gt; returnType</code>ï¼Œå‚æ•°ç±»å‹åœ¨å‚æ•°å®šä¹‰ä¸­æŒ‡å®šã€‚</p>
    <pre><code>let add: lambda -> int = $(a: int, b: int) -> int { return a + b; };
let result: int = add(3, 5);   # è°ƒç”¨</code></pre>

    <h3 id="module">æ¨¡å—å¯¼å…¥</h3>
    <p>ä½¿ç”¨ <code>import</code> å¯¼å…¥å…¶ä»–ç¼–è¯‘å¥½çš„å­—èŠ‚ç æ–‡ä»¶ä½œä¸ºæ¨¡å—ã€‚</p>
    <pre><code>import "math.copl" as math;
let x: float = math.sqrt(16.0);</code></pre>
    <p>å¯¼å…¥åï¼Œå¯ä»¥é€šè¿‡æ¨¡å—åè®¿é—®å…¶å†…éƒ¨çš„å‡½æ•°ï¼ˆç›®å‰æ¨¡å—ä»…åŒ…å«å‡½æ•°ï¼‰ã€‚</p>

    <hr>

    <h2 id="buildrun">âš™ï¸ ç¼–è¯‘ä¸è¿è¡Œ</h2>

    <h3>ç¼–è¯‘ä¸ºå­—èŠ‚ç </h3>
    <pre><code>copl -c source.copl</code></pre>
    <p>ç”Ÿæˆ <code>source.copl</code> å­—èŠ‚ç æ–‡ä»¶ï¼ˆåç§°ä¸åŸæ–‡ä»¶ç›¸åŒï¼Œæ‰©å±•åæ›¿æ¢ä¸º <code>.copl</code>ï¼‰ã€‚</p>

    <h3>è¿è¡Œå­—èŠ‚ç </h3>
    <pre><code>copl -r source.copl</code></pre>
    <p>ç›´æ¥è¿è¡Œå·²ç¼–è¯‘çš„å­—èŠ‚ç ã€‚</p>

    <h3>åç¼–è¯‘æŸ¥çœ‹</h3>
    <pre><code>copl -d source.copl</code></pre>
    <p>æ‰“å°å­—èŠ‚ç çš„æŒ‡ä»¤åºåˆ—ï¼Œç”¨äºè°ƒè¯•ã€‚</p>

    <hr>

    <h2 id="examples">ğŸ“‹ ç¤ºä¾‹ä»£ç </h2>

    <div class="example-title">ğŸ”¹ æ–æ³¢é‚£å¥‘æ•°åˆ—</div>
    <pre><code>def fib(n: int) {
    if (n <= 1) {
        return n;
    }
    return fib(n-1) + fib(n-2);
}

def main() {
    let i: int = 0;
    while (i < 10) {
        println(fib(i));
        ++i;
    }
}</code></pre>

    <div class="example-title">ğŸ”¹ ä½¿ç”¨ç±»å’Œå¯¹è±¡</div>
    <pre><code>class Point {
    public let x: float;
    public let y: float;

    public def constructor(x: float, y: float) {
        this.x = x;
        this.y = y;
    }

    public def distance(other: Point) -> float {
        let dx: float = this.x - other.x;
        let dy: float = this.y - other.y;
        return (dx*dx + dy*dy) ** 0.5;
    }
}

def main() {
    let p1: Point = new Point(0.0, 0.0);
    let p2: Point = new Point(3.0, 4.0);
    println(p1.distance(p2));  # è¾“å‡º 5.0
}</code></pre>

    <div class="example-title">ğŸ”¹ Lambda ä¸æ•°ç»„éå†</div>
    <pre><code>def main() {
    let arr: [int] = [1, 2, 3, 4, 5];
    let map: lambda -> int = $(x: int) -> int { return x * x; };
    let i: int = 0;
    while (i < size(arr)) {
        arr[i] = map(arr[i]);
        ++i;
    }
    # arr ç°åœ¨ä¸º [1, 4, 9, 16, 25]
}</code></pre>

    <hr>

    <h2 id="builtins">ğŸ”§ å†…ç½®å‡½æ•°</h2>
    <p>COPL æä¾›å°‘é‡å†…ç½®å‡½æ•°ï¼Œæ— éœ€å¯¼å…¥å³å¯ä½¿ç”¨ï¼š</p>
    <table>
        <thead><tr><th>å‡½æ•°å</th><th>å‚æ•°</th><th>è¿”å›å€¼</th><th>è¯´æ˜</th></tr></thead>
        <tbody>
            <tr><td><code>print</code></td><td>ä»»æ„å€¼</td><td><code>null</code></td><td>æ‰“å°å‚æ•°ï¼ˆæ— æ¢è¡Œï¼‰</td></tr>
            <tr><td><code>println</code></td><td>ä»»æ„å€¼</td><td><code>null</code></td><td>æ‰“å°å‚æ•°å¹¶æ¢è¡Œ</td></tr>
            <tr><td><code>input</code></td><td><code>string</code> æç¤º</td><td><code>string</code></td><td>è¯»å–ä¸€è¡Œç”¨æˆ·è¾“å…¥</td></tr>
            <tr><td><code>debug</code></td><td>ä»»æ„å€¼</td><td><code>null</code></td><td>æ‰“å°å€¼çš„å†…éƒ¨è°ƒè¯•ä¿¡æ¯</td></tr>
            <tr><td><code>append</code></td><td>ç›®æ ‡ï¼Œå€¼</td><td><code>null</code></td><td>å‘æ•°ç»„æˆ–å­—ç¬¦ä¸²è¿½åŠ å…ƒç´ </td></tr>
            <tr><td><code>size</code></td><td>æ•°ç»„æˆ–å­—ç¬¦ä¸²</td><td><code>int</code></td><td>è¿”å›é•¿åº¦</td></tr>
            <tr><td><code>str2int</code></td><td><code>string</code></td><td><code>int</code></td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°</td></tr>
            <tr><td><code>not_null</code></td><td>ä»»æ„å€¼</td><td><code>bool</code></td><td>åˆ¤æ–­å€¼æ˜¯å¦ä¸ä¸º <code>null</code></td></tr>
        </tbody>
    </table>

    <footer>
        <p>Â© 2025 COPL è¯­è¨€ Â· å¼€æº Â· æ¬¢è¿è´¡çŒ® Â· <a href="#">GitHub</a> Â· <a href="#">æŠ¥å‘Šé—®é¢˜</a></p>
        <p style="font-size:0.9rem; color:#5a6f84;">æ–‡æ¡£ç‰ˆæœ¬ 1.0 Â· æœ€åæ›´æ–° 2025-02-28</p>
    </footer>
</div>
</body>
</html>